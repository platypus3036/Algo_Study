name: Generate Daily Study Template

on:
  workflow_dispatch:
    inputs:
      date:
        description: 'í´ë” ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•  ë‚ ì§œ (yymmdd í˜•ì‹)'
        required: true
      problems:
        description: 'ë¬¸ì œì™€ ë§í¬ ëª©ë¡ (í˜•ì‹: ë¬¸ì œì´ë¦„1:ë§í¬1,ë¬¸ì œì´ë¦„2:ë§í¬2)'
        required: true
        default: 'ë¬¸ì œA:https://example.com/problem/1,ë¬¸ì œB:https://example.com/problem/2'

jobs:
  generate-files:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Create study template
        run: |
          TARGET_DATE="${{ github.event.inputs.date }}"
          # --- ë°”ë¡œ ì´ ë¶€ë¶„ì…ë‹ˆë‹¤! ---
          # ì…ë ¥ë°›ì€ ê°’ì„ ìŒë”°ì˜´í‘œë¡œ ê°ì‹¸ì„œ ë„ì–´ì“°ê¸°ê°€ í¬í•¨ëœ ë¬¸ìì—´ë„ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬í•©ë‹ˆë‹¤.
          PROBLEM_LIST="${{ github.event.inputs.problems }}"
          
          mkdir -p "$TARGET_DATE"
          
          # README íŒŒì¼ ë‚´ìš© ìƒì„± (ì´í›„ ë¡œì§ì€ ë™ì¼)
          README_CONTENT=$(cat <<-EOF
          # ğŸ—“ï¸ ${TARGET_DATE} ìŠ¤í„°ë”” íšŒê³ 
          # ... (ì´í•˜ ìƒëµ) ...
          EOF
          )
          
          IFS=',' read -ra PROBLEMS_ARRAY <<< "$PROBLEM_LIST"

          for item in "${PROBLEMS_ARRAY[@]}"; do
            PROBLEM_NAME="${item%%:*}"
            PROBLEM_LINK="${item#*:}"
            PROBLEM_NAME=$(echo "$PROBLEM_NAME" | sed 's/^[ \t]*//;s/[ \t]*$//')
            
            README_CONTENT+=$(cat <<-EOM

          ### ğŸ“ ${PROBLEM_NAME}
          - **ë¬¸ì œ ë§í¬**: [ë°”ë¡œê°€ê¸°](${PROBLEM_LINK})
          - **ë‚œì´ë„**: 
          - **ì£¼ìš” ì ‘ê·¼ë²• ìš”ì•½**: 
          - **í† ë¡  ë‚´ìš© ë° í”¼ë“œë°±**: 
          EOM
          )
          done
          
          # ... (ì´í›„ KPT, ë‹¤ìŒ ì£¼ ê³„íš ì¶”ê°€ ë¡œì§ ìƒëµ) ...

          echo "$README_CONTENT" > "${TARGET_DATE}/README.md"
          
      - name: Commit and push changes
        # ... (ì»¤ë°‹ ë° í‘¸ì‹œ ë¡œì§ì€ ë™ì¼) ...
