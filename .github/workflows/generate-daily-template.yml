name: Generate Daily Study Template

on:
  workflow_dispatch:
    inputs:
      date:
        description: 'í´ë” ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•  ë‚ ì§œ (yymmdd í˜•ì‹)'
        required: true
        # $() íŠ¹ìˆ˜ ë¬¸ìê°€ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¤ì§€ ì•Šë„ë¡ í°ë”°ì˜´í‘œë¡œ ê°ìŒŒìŠµë‹ˆë‹¤.
        default: "$(date +'%y%m%d')"
      problems:
        description: 'ì˜¤ëŠ˜ ìŠ¤í„°ë””ì—ì„œ ë‹¤ë£° ë¬¸ì œ ëª©ë¡ (ì‰¼í‘œë¡œ êµ¬ë¶„)'
        required: true
        default: 'ë¬¸ì œì´ë¦„1,ë¬¸ì œì´ë¦„2'

jobs:
  generate-files:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Create Common Study Template
        run: |
          TARGET_DATE=${{ github.event.inputs.date }}
          PROBLEM_LIST=${{ github.event.inputs.problems }}

          # 1. ë‚ ì§œ í´ë” ìƒì„±
          mkdir -p "$TARGET_DATE"
          
          # 2. ë‚ ì§œ í´ë” ë‚´ì— ê³µìš© README ìƒì„± ë° ê¸°ë³¸ í…œí”Œë¦¿ ì‘ì„±
          cat <<EOF > "${TARGET_DATE}/README.md"
# ğŸ—“ï¸ ${TARGET_DATE} ìŠ¤í„°ë”” íšŒê³ 

## ğŸ¯ ì´ë²ˆ ì£¼ ìŠ¤í„°ë”” ëª©í‘œ ë° ì£¼ìš” í•™ìŠµ ë‚´ìš©

- 

---

## ğŸ“š ë¬¸ì œë³„ í† ë¡  ë° íšŒê³ 
EOF

          # 3. ì‰¼í‘œë¡œ êµ¬ë¶„ëœ ë¬¸ì œ ëª©ë¡ì„ ë°°ì—´ë¡œ ë³€í™˜
          IFS=',' read -ra PROBLEMS_ARRAY <<< "$PROBLEM_LIST"
          
          # 4. ê° ë¬¸ì œì— ëŒ€í•œ í† ë¡  ì„¹ì…˜ì„ READMEì— ì¶”ê°€
          for problem in "${PROBLEMS_ARRAY[@]}"; do
            trimmed_problem=$(echo "$problem" | xargs)
            
            cat <<EOM >> "${TARGET_DATE}/README.md"

### ğŸ“ ${trimmed_problem}

- **ë¬¸ì œ ë§í¬**: [ì—¬ê¸°ì— ë§í¬ ì…ë ¥]
- **ë‚œì´ë„**: 
- **ì£¼ìš” ì ‘ê·¼ë²• ìš”ì•½**: (ì˜ˆ: AëŠ” DFS, BëŠ” DPë¡œ ì ‘ê·¼)
- **í† ë¡  ë‚´ìš© ë° í”¼ë“œë°±**: (ì˜ˆ: ì‹œê°„ ë³µì¡ë„ ê°œì„  ë°©ì•ˆ, ì½”ë“œ ê°€ë…ì„± ë…¼ì˜)
EOM
          done
          
          # 5. KPT íšŒê³  ë° ë‹¤ìŒ ì£¼ ê³„íš ì„¹ì…˜ì„ READMEì— ì¶”ê°€
          cat <<EOF >> "${TARGET_DATE}/README.md"

---

## ğŸš€ KPT íšŒê³  (Keep, Problem, Try)

### Keep (ìœ ì§€í•  ì )

- 

### Problem (ê°œì„ í•  ì )

- 

### Try (ë‹¤ìŒì— ì‹œë„í•  ì )

- 

---

## ğŸ—“ï¸ ë‹¤ìŒ ì£¼ ê³„íš

- 
EOF

      - name: Commit and Push changes
        run: |
          git config --global user.name 'github-actions[bot]'
          git config --global user.email 'github-actions[bot]@users.noreply.github.com'
          git add .
          git commit -m "docs: ${{ github.event.inputs.date }} ìŠ¤í„°ë”” íšŒê³  í…œí”Œë¦¿ ìƒì„±" || exit 0
          git push
